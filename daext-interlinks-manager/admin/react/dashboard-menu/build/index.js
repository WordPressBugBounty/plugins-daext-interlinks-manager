(()=>{"use strict";const e=window.React,t=wp.element.useMemo,a="...",n=(e,t)=>{let a=t-e+1;return Array.from({length:a},((t,a)=>a+e))};var i;function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r.apply(this,arguments)}var l,s=function(t){return e.createElement("svg",r({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),i||(i=e.createElement("path",{d:"m18 17-5-5 5-5m-7 10-5-5 5-5",stroke:"#000",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})))};function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o.apply(this,arguments)}var c,m=function(t){return e.createElement("svg",o({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),l||(l=e.createElement("path",{d:"m15 18-6-6 6-6",stroke:"#0783BE",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})))};function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d.apply(this,arguments)}var g,u=function(t){return e.createElement("svg",d({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),c||(c=e.createElement("path",{d:"m9 18 6-6-6-6",stroke:"#0783BE",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})))};function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},p.apply(this,arguments)}var h=function(t){return e.createElement("svg",p({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),g||(g=e.createElement("path",{d:"m6 17 5-5-5-5m7 10 5-5-5-5",stroke:"#000",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})))};const E=i=>{const{onPageChange:r,totalCount:l,siblingCount:o=1,currentPage:c,pageSize:d}=i,g=(({totalCount:e,pageSize:i,siblingCount:r=1,currentPage:l})=>t((()=>{const t=Math.ceil(e/i);if(r+5>=t)return n(1,t);const s=Math.max(l-r,1),o=Math.min(l+r,t),c=s>2,m=o<t-2,d=t;if(!c&&m)return[...n(1,3+2*r),a,t];if(c&&!m){let e=n(t-(3+2*r)+1,t);return[1,a,...e]}if(c&&m){let e=n(s,o);return[1,a,...e,a,d]}}),[e,i,r,l]))({currentPage:c,totalCount:l,siblingCount:o,pageSize:d});if(0===c||g.length<2)return null;let p=g[g.length-1];return(0,e.createElement)("ul",{className:"pagination-container"},(0,e.createElement)("li",{className:"pagination-item "+(1===c?"disabled":""),onClick:()=>{r(1)},key:-2},(0,e.createElement)(s,null)),(0,e.createElement)("li",{className:"pagination-item "+(1===c?"disabled":""),onClick:()=>{1!==c&&r(c-1)},key:-1},(0,e.createElement)(m,null)),g.map((t=>t===a?(0,e.createElement)("li",{className:"pagination-item dots",key:crypto.randomUUID()},"â€¦"):(0,e.createElement)("li",{key:t,className:"pagination-item "+(t===c?"selected":""),onClick:()=>r(t)},t))),(0,e.createElement)("li",{className:"pagination-item "+(c===p?"disabled":""),onClick:()=>{c!==p&&r(c+1)},key:p+1},(0,e.createElement)(u,null)),(0,e.createElement)("li",{className:"pagination-item "+(c===p?"disabled":""),onClick:()=>{r(p)},key:p+2},(0,e.createElement)(h,null)))},b=wp.element.useState,k=wp.element.useMemo,{__}=wp.i18n,_=t=>{const[a,n]=b(1),i=k((()=>{const e=10*(a-1),n=e+10;return t.data.slice(e,n)}),[a,t.data]);function r(e){return t.formData.sortingColumn===e?t.formData.sortingOrder:""}return(0,e.createElement)("div",{className:"daextinma-data-table-container"},(0,e.createElement)("table",{className:"daextinma-react-table__daextinma-data-table daextinma-react-table__daextinma-data-table-dashboard-menu"},(0,e.createElement)("thead",null,(0,e.createElement)("tr",null,(0,e.createElement)("th",null,(0,e.createElement)("button",{className:"daextinma-react-table__daextinma-sorting-button",onClick:t.handleSortingChanges,value:"post_title","data-icon":r("post_title")},__("Post","daext-interlinks-manager"))),(0,e.createElement)("th",null,(0,e.createElement)("button",{className:"daextinma-react-table__daextinma-sorting-button",onClick:t.handleSortingChanges,value:"post_date","data-icon":r("post_date")},__("Date","daext-interlinks-manager"))),(0,e.createElement)("th",null,(0,e.createElement)("button",{className:"daextinma-react-table__daextinma-sorting-button",onClick:t.handleSortingChanges,value:"post_type","data-icon":r("post_type")},__("Type","daext-interlinks-manager"))),(0,e.createElement)("th",null,(0,e.createElement)("button",{className:"daextinma-react-table__daextinma-sorting-button",onClick:t.handleSortingChanges,value:"content_length","data-icon":r("content_length")},__("Length","daext-interlinks-manager"))),(0,e.createElement)("th",null,(0,e.createElement)("button",{className:"daextinma-react-table__daextinma-sorting-button",onClick:t.handleSortingChanges,value:"manual_interlinks","data-icon":r("manual_interlinks")},__("Int. Links","daext-interlinks-manager"))),(0,e.createElement)("th",null,(0,e.createElement)("button",{className:"daextinma-react-table__daextinma-sorting-button",onClick:t.handleSortingChanges,value:"iil","data-icon":r("iil")},__("Int. Inbound Links","daext-interlinks-manager"))),(0,e.createElement)("th",null,(0,e.createElement)("button",{className:"daextinma-react-table__daextinma-sorting-button",onClick:t.handleSortingChanges,value:"recommended_interlinks","data-icon":r("recommended_interlinks")},__("Recomm.","daext-interlinks-manager"))),(0,e.createElement)("th",null,(0,e.createElement)("button",{className:"daextinma-react-table__daextinma-sorting-button",onClick:t.handleSortingChanges,value:"optimization","data-icon":r("optimization")},__("Opt.","daext-interlinks-manager"))))),(0,e.createElement)("tbody",null,i.map((t=>(0,e.createElement)("tr",{key:t.id},(0,e.createElement)("td",null,(0,e.createElement)("div",{className:"daextinma-react-table__post-cell-container"},(0,e.createElement)("a",{href:t.post_permalink},t.post_title),(0,e.createElement)("a",{href:t.post_permalink,target:"_blank",className:"daextinma-react-table__icon-link"}),(0,e.createElement)("a",{href:t.post_edit_link,className:"daextinma-react-table__icon-link"}))),(0,e.createElement)("td",null,t.formatted_post_date),(0,e.createElement)("td",null,t.post_type),(0,e.createElement)("td",null,t.content_length),(0,e.createElement)("td",null,t.manual_interlinks),(0,e.createElement)("td",null,t.iil),(0,e.createElement)("td",null,t.recommended_interlinks),(0,e.createElement)("td",null,t.optimization)))))),0===t.data.length&&(0,e.createElement)("div",{className:"daextinma-no-data-found"},__("We couldn't find any results matching your filters. Try adjusting your criteria.","daext-interlinks-manager")),t.data.length>0&&(0,e.createElement)("div",{className:"daextinma-react-table__pagination-container"},(0,e.createElement)("div",{className:"daext-displaying-num"},t.data.length+" items"),(0,e.createElement)(E,{className:"pagination-bar",currentPage:a,totalCount:t.data.length,pageSize:10,onPageChange:e=>n(e)})))},v=t=>(0,e.createElement)("div",{className:"loading-screen"},(0,e.createElement)("div",{className:"loading-screen__wrapper"},(0,e.createElement)("div",{className:"loading-screen__content"},(0,e.createElement)("div",{className:"loading-screen__spinner-container"},(0,e.createElement)("div",{className:"loading-screen__spinner"})),(0,e.createElement)("div",{className:"loading-screen__text"},void 0!==t.dataUpdateRequired&&t.dataUpdateRequired?t.generatingDataMessage:t.loadingDataMessage)))),x=wp.element.useState,N=wp.element.useEffect,{__:w}=wp.i18n;let y=window.DAEXTINMA_PARAMETERS.internal_links_data_last_update,C=window.DAEXTINMA_PARAMETERS.internal_links_data_update_frequency,f=window.DAEXTINMA_PARAMETERS.current_time;const{render:D}=wp.element,{createRoot:I}=wp.element,S=document.getElementById("react-root"),M=(0,e.createElement)((()=>{const[t,a]=x({optimizationStatus:0,searchString:"",searchStringChanged:!1,sortingColumn:"post_date",sortingOrder:"desc"}),[n,i]=x(!0),[r,l]=x(!1),[s,o]=x([]),[c,m]=x({allPosts:0,averageMil:0});return N((()=>{let e=!1;if(""===y)e=!0;else{let t=new Date(f);switch(C){case"hourly":t.setHours(t.getHours()-1),new Date(y)<t&&(e=!0);break;case"daily":t.setDate(t.getDate()-1),new Date(y)<t&&(e=!0);break;case"weekly":t.setDate(t.getDate()-7),new Date(y)<t&&(e=!0);break;case"monthly":t.setMonth(t.getMonth()-1),new Date(y)<t&&(e=!0)}}if(e&&!r)return y=f,void l(!0);i(!0),wp.apiFetch({path:"/interlinks-manager-pro/v1/statistics",method:"POST",data:{optimization_status:t.optimizationStatus,search_string:t.searchString,sorting_column:t.sortingColumn,sorting_order:t.sortingOrder,data_update_required:r}}).then((e=>{o(e.table),m({allPosts:e.statistics.all_posts,averageMil:e.statistics.average_mil}),r&&(l(!1),a({optimizationStatus:0,searchString:"",searchStringChanged:!1,sortingColumn:"post_date",sortingOrder:"desc"})),i(!1)}))}),[t.optimizationStatus,t.searchStringChanged,t.sortingColumn,t.sortingOrder,r]),(0,e.createElement)(e.Fragment,null,(0,e.createElement)(React.StrictMode,null,n?(0,e.createElement)(v,{loadingDataMessage:w("Loading data...","daext-interlinks-manager"),generatingDataMessage:w("Data is being generated. For large sites, this process may take several minutes. Please wait...","daext-interlinks-manager"),dataUpdateRequired:r}):(0,e.createElement)("div",{className:"daextinma-admin-body"},(0,e.createElement)("div",{className:"daextinma-react-table"},(0,e.createElement)("div",{className:"daextinma-react-table-header"},(0,e.createElement)("div",{className:"statistics"},(0,e.createElement)("div",{className:"statistic-label"},w("All posts","daext-interlinks-manager"),":"),(0,e.createElement)("div",{className:"statistic-value"},c.allPosts),(0,e.createElement)("div",{className:"statistic-label"},w("Average Internal Links","daext-interlinks-manager"),":"),(0,e.createElement)("div",{className:"statistic-value"},c.averageMil)),(0,e.createElement)("div",{className:"tools-actions"},(0,e.createElement)("button",{onClick:e=>{l((e=>!e))}},(0,e.createElement)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIyIDEwQzIyIDEwIDE5Ljk5NSA3LjI2ODIyIDE4LjM2NjIgNS42MzgyNEMxNi43MzczIDQuMDA4MjcgMTQuNDg2NCAzIDEyIDNDNy4wMjk0NCAzIDMgNy4wMjk0NCAzIDEyQzMgMTYuOTcwNiA3LjAyOTQ0IDIxIDEyIDIxQzE2LjEwMzEgMjEgMTkuNTY0OSAxOC4yNTQzIDIwLjY0ODIgMTQuNU0yMiAxMFY0TTIyIDEwSDE2IiBzdHJva2U9IiM0NzU0NjciIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjwvc3ZnPgo=",className:"button-icon"}),w("Update metrics","daext-interlinks-manager")),(0,e.createElement)("button",{onClick:()=>{wp.apiFetch({path:"/interlinks-manager-pro/v1/dashboard-menu-export-csv",method:"POST"}).then((e=>{((e,t)=>{const a=e,n=window.URL.createObjectURL(new Blob([a])),i=document.createElement("a");i.href=n;const r="dashboard-"+Date.now().toString().slice(0,10)+".csv";i.setAttribute("download",r),document.body.appendChild(i),i.click(),i.parentNode.removeChild(i)})(e.csv_content)}))},...0===s.length?{disabled:"disabled"}:{}},w("Export","daext-interlinks-manager")))),(0,e.createElement)("div",{className:"daextinma-react-table__daextinma-filters"},(0,e.createElement)("div",{className:"daextinma-pills"},(0,e.createElement)("button",{className:"daextinma-pill","data-checked":0===t.optimizationStatus?"true":"false",onClick:()=>a({...t,optimizationStatus:0})},"All"),(0,e.createElement)("button",{className:"daextinma-pill","data-checked":1===t.optimizationStatus?"true":"false",onClick:()=>a({...t,optimizationStatus:1})},"Not Optimized"),(0,e.createElement)("button",{className:"daextinma-pill","data-checked":2===t.optimizationStatus?"true":"false",onClick:()=>a({...t,optimizationStatus:2})},"Optimized")),(0,e.createElement)("div",{className:"daextinma-search-container"},(0,e.createElement)("input",{onKeyUp:function(e){"Enter"===e.key&&(e.preventDefault(),document.getElementById("daextinma-search-button").click())},type:"text",placeholder:w("Filter by title","daext-interlinks-manager"),value:t.searchString,onChange:e=>a({...t,searchString:e.target.value})}),(0,e.createElement)("input",{id:"daextinma-search-button",className:"daextinma-btn daextinma-btn-secondary",type:"submit",value:w("Search","daext-interlinks-manager"),onClick:()=>a({...t,searchStringChanged:!t.searchStringChanged})}))),(0,e.createElement)(_,{data:s,handleSortingChanges:function(e){let n=t.sortingOrder;t.sortingColumn===e.target.value&&(n="asc"===t.sortingOrder?"desc":"asc"),a({...t,sortingColumn:e.target.value,sortingOrder:n})},formData:t})))))}),null);S&&(I?I(S).render(M):D(M,S))})();